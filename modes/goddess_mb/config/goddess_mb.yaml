#config_version=5
#goddess mb mode
#Enter mode from completion of all goddesses. This can only happen when field
#is running. When mode starts, field ends. Activate lock with an orbit shot.
#Locking engaged enables post to send ball downstairs
#BB is locked up. Goddesses enter via holes.
#Final forth ball entering hole triggers the MB
#Hits to the holes are jackpots.
#Sequences to the pops increase the multiplier. (Light 2x 3x accordingly)
#If ball drains when locking, next ball resumes the mission.
#
mode:
  priority: 800
  start_events:
    - base_aphrodite_summoned # {device.ball_devices.bd_poseidon_ramp.balls==0 and device.ball_devices.bd_olympus_ramp.balls==0}
    - key_c_pressed
  stop_events:
    - multiball_goddess_ended
  restart_on_next_ball: true #alternatively might need a start event for a ball being present in the lock

variable_player:
  multiball_lock_subway_lock_locked_ball:
    score: 5000
  logicblock_goddess_all_pops_complete:
    score: 20000

counters:
  goddess_multiplier:
    starting_count: 1
    persist_state: false
    count_events: logicblock_goddess_all_pops_complete

multiball_locks:
  subway_lock:
    source_playfield: earth_pf
    enable_events:
      - base_orbit_clockwise_hit
      - base_orbit_counter_clockwise_hit
    disable_events: multiball_lock_subway_lock_locked_ball
    balls_to_lock: 3
    locked_ball_counting_strategy: physical_only
    lock_devices: bd_scoop
    balls_to_replace: 3 #2 #1=replace first ball locked from trough, use when triggering with lock full event.Default -1 = replace every ball locked with new ball
    debug: True

multiballs:
  goddess:
    source_playfield: earth_pf
    ball_count: 3
    ball_locks: bd_scoop
    ball_count_type: add  # increase number of playfield balls by couny
    shoot_again: 14s #ball save for MB 10 sec is default
    start_events: goddess_trigger_mb_release_hit
    enable_events: mode_goddess_mb_starting
    debug: true

shots:
  goddess_trigger_mb_release:
    enable_events: multiball_lock_subway_lock_full
    playfield: earth_pf
    hit_events:
      - base_hole_distal_hit
      - base_hole_proximal_hit
    switches: s_ballblock


accruals:
  goddess_all_pops:
    events:
      - base_left_side_pop_hit
      - base_poseidon_pop_hit
#      - base_olympus_left_pop_hit
      - base_olympus_right_pop_hit
      - base_olympus_lower_pop_hit
    reset_on_complete: true


show_player:
#  mode_mystery_stopping: #dont start the ball timer until after ball hold ends
#    show_rainbow_all_but_bs:
#      speed: 2
  multiball_goddess_started:
    show_countdown99_green:
      speed: 10
      loops: 0
    show_everything_green:
      speed: 1
      loops: -1
    show_sparkle_gg_green:
      speed: 40
      loops: -1
#event_player:
#  mode_scoop_mb_started:
#    - force_bb_down
#  mode_scoop_mb_ending:
#    - release_bb_override

widgets:
  goddess_mb_shoot_orbits:
  - type: text
    text: "Loop Orbit to\nOpen Underworld"
    font_size: 60
    y: 75%
    x: 50%
    color: white
    font_name: GreekGods2
  goddess_mb_shoot_ramp:
  - type: text
    text: "Shoot cave for\nMultiball"
    font_size: 60
    y: 75%
    x: 50%
    color: white
    font_name: GreekGods2
  goddess_mb_jackpot:
  - type: text
    text: Pop Sequence Jackpot!
    color: white
    y: 25%
    anchor_x: center
    anchor_y: center
    font_size: 75
    expire: 3s
  goddess_mb_bonus_instructions:
  - type: text
    text: "Hit All Pops\nFor Bonus"
    color: white
    y: 75%
    anchor_x: center
    anchor_y: center
    font_size: 75
    expire: 3s
  goddess_athena:
  - type: text
    text: "Help Athena\nTo the Underworld"
    color: white
    y: 25%
    anchor_x: center
    anchor_y: center
    font_size: 75
    expire: 3s
  goddess_artimus:
  - type: text
    text: "Help Artimus\nTo the Underworld"
    color: white
    y: 25%
    anchor_x: center
    anchor_y: center
    font_size: 75
    expire: 3s
  goddess_aphrodite:
  - type: text
    text: "Help Aphrodite\nTo in Underworld"
    color: white
    y: 25%
    anchor_x: center
    anchor_y: center
    font_size: 75
    expire: 3s
  goddess_hestia:
  - type: text
    text: "Help Hestia\nTo the Underworld"
    color: white
    y: 25%
    anchor_x: center
    anchor_y: center
    font_size: 75
    expire: 3s

widget_player:
  slide_pf_goddess_mb_started_slide_active:
    goddess_hestia:
      slide: pf_goddess_mb_instruction_slide
    goddess_mb_shoot_orbits:
      slide: pf_goddess_mb_instruction_slide
    base_orbit_clockwise_hit:
      goddess_mb_shoot_orbits:
        action: remove
    base_orbit_counter_clockwise_hit:
      goddess_mb_shoot_orbits:
        action: remove

#    slide: pf_goddess_mb_started_slide

slide_player:
  mode_goddess_mb_started:
    pf_goddess_mb_started_slide:
      target: playfield_lcd
      background_color: 004400
      widgets:
      - type: text
        text: Gather the Goddesses
        color: white
        y: 50%
        anchor_x: center
        anchor_y: center
        font_size: 45
  multiball_goddess_mb_started:
    pf_goddess_mb_instruction_slide:
      action: remove
    pf_goddess_mb_started_slide:
      target: playfield_lcd
      background_color: 004400
      widgets:
      - type: text
        text: "Goddess Rebellion!\nHit Cave for Bonus\nHit Pop Sequence for\nBonus Multiplier"
        color: white
        y: 50%
        anchor_x: center
        anchor_y: center
        font_size: 45
